<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container mt-5 py-5 bg-primary">
      <h1 class="text-center text-white">User List</h1>
      <table class="mt-5 table shadow">
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Email</th>
            <th>Address</th>
            <th>Website</th>
            <th>Phone</th>
            <th>Company</th>
          </tr>
        </thead>
        <tbody id="result"></tbody>
      </table>
    </div>
  </body>
  <script>
    // to get data from https://jsonplaceholder.typicode.com/users
    // steps to make api call using XHR
    // 1. Create an object for XMLHttpRequest class
    const api = new XMLHttpRequest();
    // 2. Create/initialize request to https://jsonplaceholder.typicode.com/users
    api.open("get", "https://jsonplaceholder.typicode.com/users");
    // 3. send request
    api.send();
    api.onreadystatechange = () => {
      console.log(api.readyState);
      if (api.readyState == 4) {
        if (api.status >= 200 && api.status < 300) {
          console.log(api.responseText);
          const users = JSON.parse(api.responseText);
          console.log(users);
          users.forEach((user, index) => {
            result.innerHTML += `
              <tr>
                <td>${index + 1}</td>
                <td>${user.name}</td>
                <td>${user.email}</td>
                <td>
                  ${user.address.street},${user.address.city}
                </td>
                <td> ${user.website}</td>
                <td>${user.phone}</td>
                <td>${user.company.name}</td>
              </tr>
            `;
          });
        } else {
          console.log("Api call failed...");
        }
      } else {
        console.log("Waiting for server to respond...");
      }
    };
  </script>
</html>
