<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Quotes Generator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div
      style="min-height: 100vh"
      class="bg-secondary w-100 d-flex justify-content-center align-items-center"
    >
      <div class="container text-center">
        <h1 class="text-light">Quote Generator App</h1>
        <button onclick="getQuote()" class="mt-5 btn btn-success">
          Generate Quote
        </button>
        <div id="result" class="my-5">
          <div class="border rounded p-5">
            <h1 class="text-light">Quote for the day</h1>
            <p class="fw-bolder text-white fs-2"></p>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    const getQuote = () => {
      // 1. Create an object for XMLHttpRequest class
      const api = new XMLHttpRequest();
      // 2. Create/initialize request to https://dummyjson.com/quotes
      api.open("get", "https://dummyjson.com/quotes");
      // 3. send request
      api.send();
      api.onreadystatechange = () => {
        console.log(api.readyState);
        if (api.readyState == 4) {
          if (api.status >= 200 && api.status < 300) {
            console.log(api.responseText);
            const response = JSON.parse(api.responseText);
            console.log(response);
            const allQuotes = response.quotes;
            console.log(allQuotes);
            const randomIndex = Math.floor(Math.random() * allQuotes.length);
            console.log(randomIndex);
            const displayQuote = allQuotes[randomIndex];
            result.innerHTML = `<div class="border rounded p-5">
            <h1 class="text-light mb-3">Quote for the day</h1>
            <p class="fw-bolder text-white fs-2">"${displayQuote.quote}"</p>
            <p class="fw-bolder text-white fs-2"> ~ ${displayQuote.author}</p>
          </div>`;
          } else {
            console.log("Api call failed...");
          }
        } else {
          console.log("Waiting for server to respond...");
        }
      };
    };
  </script>
</html>
